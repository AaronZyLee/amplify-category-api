batch:
  fast-fail: false
  build-graph:
    - identifier: publish_cli_to_local_registry
      buildspec: codebuild_specs/publish-cli-to-local-registry.yml
      env:
        variables:
          BUILD_ID: publish_cli_to_local_registry
      ignore-failure: false
    - identifier: amplify_e2e_tests
      buildspec: codebuild_specs/amplify-e2e-tests.yml
      env:
        variables:
          BUILD_ID: amplify_e2e_tests
          TEST_SUITE: datastore-modelgen.test.ts
          USE_PARENT_ACCOUNT: true
      depend-on:
        - publish_cli_to_local_registry